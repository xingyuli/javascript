<html>
	<body>
		<script type="text/javascript" src="../js/writer.js"></script>
		<script type="text/javascript">
		(function() {
			$dw.h4('Array#length');

			var a = ['aa', 'bb', 'cc'];

			$dw.br('a: ' + a)
			   .br('a.length: ' + a.length);

			a.length = 5;
			$dw.br('after set a.length to 5: a = ' + a);

			a.length = 1;
			$dw.br('after set a.length to 1: a = ' + a);
		})();

		(function() {
			$dw.h4('Array#concat(value...)');

			var a = ['aa'];
			$dw.br('a: ' + a);

			var b = a.concat('bb', 'cc');
			$dw.b('var b = a.concat("bb", "cc");')
			   .nbsp(4).dw('b: ' + b)
			   .nbsp(4).dw('a: ' + a);

			var c = a.concat("dd", ["yy", "zz"]);
			$dw.br()
			   .b('var c = a.concat("dd", ["yy", "zz"]);')
			   .nbsp(4).dw('c: ' + c)
			   .nbsp(4).dw('a: ' + a);
		})();

		(function() {
			$dw.h4('Array#join([separator])');

			var a = ['Hello', 'my', 'girl', '!'];
			$dw.br('a: ' + a)
			   .br('a.join(): ' + a.join())
			   .br('a.join(" "): ' + a.join(' '));
		})();

		(function() {
			$dw.h4('Array#push(value...), Array#pop()');

			var a = [1, 2, 3, 4, 5];
			$dw.br('a: ' + a);

			a.push(6);
			$dw.br('a.push(6), then a.pop(): ' + a.pop())
			   .br('a.length: ' + a.length);

			/**
			 * Array#push treats each value as one element.
			 * 
			 * While Array#concat will extract each item out if the passed
			 * arguments is an Array (non-recurssively)
			**/
			a.push([7, 8], [9, 10]);
			$dw.br()
			   .br('a.push([7, 8], [9, 10])')
			   .br('then a.pop(): ' + a.pop())
			   .br('then a.pop(): ' + a.pop());
		})();

		(function() {
			// in place rearrangements
			$dw.h4('Array#reverse()');

			var a = [5, 4, 3, 2, 1];
			var refA = a;
			$dw.br('a: ' + a + ', refA: ' + refA);

			a.reverse();
			$dw.b('a.reverse();')
			   .nbsp(4).dw('a: ' + a)
			   .nbsp(4).dw('refA: ' + refA);
		})();

		(function() {
			// in place modifications
			$dw.h4('Array#shift(), Array#unshift(value...)');

			var a = [1, 2, 3, 4];
			$dw.br('a: ' + a);

			var first = a.shift();
			$dw.b('var first = a.shift();')
			   .nbsp(4).dw('first: ' + first)
			   .nbsp(4).dw('a: ' + a)
			   .br();

			var newLength = a.unshift(999);
			$dw.b('var newLength = a.unshift(999);')
			   .nbsp(4).dw('a: ' + a)
			   .nbsp(4).dw('newLength: ' + newLength)
			   .br();
		})();

		(function() {
			// slice is not in place, while splice is
			$dw.h4('Array#slice(start[, end]), Array#splice(start[, deleteCount[, value...]])');

			function range(from, to) {
				var array = [];
				for (var i = from; i < to; i++) {
					array.push(i);
				}
				return array;
			}

			var a1 = range(0, 10);
			$dw.br('a1: ' + a1);

			var sliced = a1.slice(2, 4);
			$dw.b('var sliced = a1.slice(2, 4);')
			   .nbsp(4).dw('sliced: ' + sliced)
			   .nbsp(4).br('a1: ' + a1);

			/* **************************************************************** */

			var a2 = range(0, 10);
			$dw.br('a2: ' + a2);

			var spliced = a2.splice(2, 4);
			$dw.b('var spliced = a2.splice(2, 4);')
			   .nbsp(4).dw('spliced: ' + spliced)
			   .nbsp(4).br('a2: ' + a2);

			/* **************************************************************** */

			var a3 = range(0, 10);
			$dw.br('a3: ' + a3);

			spliced = a3.splice(1, 3, 90, 91);
			$dw.b('spliced = a3.splice(1, 3, 90, 91);')
			   .nbsp(4).dw('spliced: ' + spliced)
			   .nbsp(4).br('a3: ' + a3);
		})();

		(function() {
			// the sorting is in place
			$dw.h4('Array#sort([orderFunc])');

			var a = [ 5, 1, 1, 3, 0, 2, 1, 9, 8, 9, 0, 4, 2, 2 ];
			$dw.br('a: ' + a);

			a.sort();
			$dw.b('a.sort()').nbsp(4).br('a: ' + a);

			/* **************************************************************** */

			function MyClass(name, age) {
				this.name = name;
				this.age = age;
			}
			MyClass.prototype.toString = function() {
				return '{ name: ' + this.name + ', age: ' + this.age + ' }'
			}

			function myClassComparator(itemA, itemB) {
				if (itemA.name > itemB.name) {
					return 1;
				} else if (itemA.name < itemB.name) {
					return -1;
				} else {
					return itemA.age - itemB.age;
				}
			}

			var objs = [
				new MyClass('Josh Blouch', 34),
				new MyClass('Josh Blouch', 25),
				new MyClass('John Brown', 40),
				new MyClass('Arina Dell', 28),
				new MyClass('Kitty Shirl', 18)
			];
			$dw.h5('Custom objects')
			   .br('objs: ' + objs);
			objs.sort(myClassComparator);
			$dw.br('myClassComparator: ' + myClassComparator.toString())
			   .b('objs.sort(myClassComparator)').nbsp(4).br('objs: ' + objs);
		})();
		</script>
	</body>
</html>